---
# MAXIMALIST DASHBOARD
# Media View
# Made by Madelena Mak 2022

title: Media
path: media2
theme: "Fluent Red"

type: "custom:grid-layout"
layout: !include snippets/layout-page-margin.yaml

cards:
  - type: "custom:layout-card"
    layout_type: "custom:grid-layout"
    layout:
      grid-template-columns: auto
      grid-template-rows: auto
      grid-column-gap: 32px
      margin: -1px
    view_layout:
      grid-area: cc
    cards:
      # [Header] Summary
      - type: "custom:layout-card"
        layout_type: "custom:grid-layout"
        layout: !include snippets/layout-page-title.yaml
        view_layout:
          grid-column: 1/-1
        cards:
          - type: markdown
            style: !include snippets/style-markdown-page-title.yaml
            content: >
              # Media

              {{ states.media_player|selectattr('state','equalto','playing')|list|length }}
              device{{ iif( states.media_player|selectattr('state','equalto','playing')|list|length == 1, ' is ', 's are ') }} playing and
              {{ states.media_player|selectattr('state','equalto','paused')|list|length }}
              {{ iif( states.media_player|selectattr('state','equalto','paused')|list|length == 1, ' is ', ' are ') }} paused.
          - type: "custom:layout-card"
            layout_type: "custom:grid-layout"
            layout:
              margin: 0
              padding: 0
              card_margin: 1px
            view_layout:
              place-self: end right
            cards:
              - entity: sensor.time
                template: clock
                type: custom:button-card
                variables:
                  entity_date: sensor.date
                  entity_temperature: sensor.tempest_st_00056115_temperature
                  entity_weather: weather.east_tamworth_hourly

      # [Row] Terpsichora
      - type: vertical-stack
        cards:
          - type: "custom:button-card"
            template: header_card_no_link
            variables:
              name: BEDROOM

          - type: "custom:layout-card"
            layout_type: "custom:grid-layout"
            layout: !include snippets/layout-page-columns.yaml
            cards:
              - type: picture-elements
                image: local/images/apple-tv-remote_PM.png

                elements:
                  # Exit =================================
                  - type: icon
                    icon: none
                    tap_action:
                      action: navigate
                      navigation_path: home
                    style:
                      top: 6%
                      left: 14%
                      transform: translate(-50%, -50%) scale(380%, 380%)
                      opacity: 0
                  # Power =================================
                  - type: icon
                    icon: none
                    tap_action:
                      action: call-service
                      service: script.apple_tv_power
                    style:
                      top: 6%
                      left: 85%
                      transform: translate(-50%, -50%) scale(380%, 380%)
                      opacity: 0
                  # Up =================================
                  - type: icon
                    icon: none
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.bedroom_apple_tv
                        command: up
                    style:
                      top: 23.5%
                      left: 50%
                      transform: translate(-50%, -50%) scale(600%, 800%)
                      opacity: 0
                  # Down =================================
                  - type: icon
                    icon: none
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.bedroom_apple_tv
                        command: down
                    style:
                      top: 62%
                      left: 50%
                      transform: translate(-50%, -50%) scale(600%, 800%)
                      opacity: 0
                  # Left =================================
                  - type: icon
                    icon: none
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.bedroom_apple_tv
                        command: left
                    style:
                      top: 42.6%
                      left: 21%
                      transform: translate(-50%, -50%) scale(600%, 500%)
                      opacity: 0
                  # Right =================================
                  - type: icon
                    icon: none
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.bedroom_apple_tv
                        command: right
                    style:
                      top: 42.6%
                      left: 79%
                      transform: translate(-50%, -50%) scale(600%, 500%)
                      opacity: 0
                  # Select =================================
                  - type: icon
                    icon: none
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.bedroom_apple_tv
                        command: select
                    style:
                      top: 42.4%
                      left: 50%
                      transform: translate(-50%, -50%) scale(400%, 400%)
                      opacity: 0
                  # Home =================================
                  - type: icon
                    icon: none
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.bedroom_apple_tv
                        command: top_menu
                    hold_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.bedroom_apple_tv
                        command: home_hold
                    style:
                      top: 80%
                      left: 15.5%
                      transform: translate(-50%, -50%) scale(380%, 380%)
                      opacity: 0
                  # Play/Pause ============================
                  - type: icon
                    icon: none
                    tap_action:
                      action: call-service
                      service: media_player.media_play_pause
                      service_data:
                        entity_id: media_player.bedroom_apple_tv
                    style:
                      top: 91%
                      left: 15.5%
                      transform: translate(-50%, -50%) scale(380%, 380%)
                      opacity: 0
                  # Back =================================
                  - type: icon
                    icon: none
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.bedroom_apple_tv
                        command: menu
                    style:
                      top: 85.5%
                      left: 50%
                      transform: translate(-50%, -50%) scale(750%, 750%)
                      opacity: 0
                  # Volume Up =============================
                  - type: icon
                    icon: none
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.bedroom_apple_tv
                        command: volume_up
                    style:
                      top: 80%
                      left: 84.5%
                      transform: translate(-50%, -50%) scale(380%, 380%)
                      opacity: 0
                  # Volume Down ===========================
                  - type: icon
                    icon: none
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.bedroom_apple_tv
                        command: volume_down
                    style:
                      top: 91%
                      left: 84.5%
                      transform: translate(-50%, -50%) scale(380%, 380%)
                      opacity: 0
                card_mod:
                  style: |
                    .type-picture-elements {
                      min-height: 500px;
                      max-height: 100vh;
                      min-width: 268px;
                      max-width: min(calc((100vh - 70px) * 1125/2095), 400px);
                    }

              - type: entities
                title: Inputs
                entities:
                  - media_player.bedroom_apple_tv
                  - media_player.homepod_mini_bedroom_left
                  - media_player.homepod_mini_bedroom_right
                  - media_player.nvidia_shield_bedroom_2

              - type: entities
                title: Sonos
                entities:
                  - media_player.bedroom_symfonisk
                  - number.bedroom_symfonisk_bass
                  - number.bedroom_symfonisk_treble
                  - switch.bedroom_symfonisk_crossfade
                  - switch.bedroom_symfonisk_loudness
                  - switch.bedroom_symfonisk_status_light
                  - switch.bedroom_symfonisk_touch_controls
