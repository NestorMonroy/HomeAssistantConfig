---
# MAXIMALIST DASHBOARD
# Media View
# Made by Madelena Mak 2022

title: Media
path: media2
theme: "Fluent Red"

type: "custom:grid-layout"
layout: !include snippets/layout-page-margin.yaml

cards:
  - type: "custom:layout-card"
    layout_type: "custom:grid-layout"
    layout:
      grid-template-columns: auto
      grid-template-rows: auto
      grid-column-gap: 32px
      margin: -1px
    view_layout:
      grid-area: cc
    cards:
      # [Header] Summary
      - type: "custom:layout-card"
        layout_type: "custom:grid-layout"
        layout: !include snippets/layout-page-title.yaml
        view_layout:
          grid-column: 1/-1
        cards:
          - type: markdown
            style: !include snippets/style-markdown-page-title.yaml
            content: >
              # Media
              {{ states.media_player|selectattr('state','equalto','playing')|list|length }}
              device{{ iif( states.media_player|selectattr('state','equalto','playing')|list|length == 1, ' is ', 's are ') }} playing and
              {{ states.media_player|selectattr('state','equalto','paused')|list|length }}
              {{ iif( states.media_player|selectattr('state','equalto','paused')|list|length == 1, ' is ', ' are ') }} paused.
          - type: "custom:layout-card"
            layout_type: "custom:horizontal-layout"
            view_layout:
              place-self: center start
            cards:
              - type: "custom:swipe-card"
                parameters:
                  breakpointBase: container
                  enabled: true
                  slidesPerView: 1.66
                  breakpoints:
                    "600":
                      enabled: false
                      slidesPerView: 2
                cards:
                  - type: "custom:mushroom-entity-card"
                    entity: binary_sensor.ping_my_website
                    name: OPAS Tynan ↗
                    icon_color: pink
                    style: "ha-card {background: none;}"
                    tap_action:
                      action: url
                      url_path: "https://MadelenaMak.com"

                  - type: "custom:mushroom-entity-card"
                    entity: sensor.my_last_fm_play_count
                    name: Last.fm ↗
                    icon: "mdi:music"
                    icon_color: pink
                    style: "ha-card {background: none;}"
                    tap_action:
                      action: url
                      url_path: "https://last.fm/user/pakkei"

      # [Row] Terpsichora
      - type: vertical-stack
        cards:
          - type: "custom:button-card"
            template: header_card
            variables:
              name: LIVING ROOM - TERPSICHORA
              icon: mdi:cat
              show_icon: true
              label: null
              arrow: "mdi:arrow-top-right"
              action: navigate
              link: "/ui-machines/terpsichora"

          - type: "custom:layout-card"
            layout_type: "custom:grid-layout"
            layout: !include snippets/layout-page-columns.yaml
            cards:
              - type: picture-elements
                image: local/images/apple-tv-remote_PM.png

                elements:
                  # Exit =================================
                  - type: icon
                    icon: none
                    tap_action:
                      action: navigate
                      navigation_path: home
                    style:
                      top: 6%
                      left: 14%
                      transform: translate(-50%, -50%) scale(380%, 380%)
                      opacity: 0
                  # Power =================================
                  - type: icon
                    icon: none
                    tap_action:
                      action: call-service
                      service: script.apple_tv_power
                    style:
                      top: 6%
                      left: 85%
                      transform: translate(-50%, -50%) scale(380%, 380%)
                      opacity: 0
                  # Up =================================
                  - type: icon
                    icon: none
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.apple_tv_bedroom
                        command: up
                    style:
                      top: 23.5%
                      left: 50%
                      transform: translate(-50%, -50%) scale(600%, 800%)
                      opacity: 0
                  # Down =================================
                  - type: icon
                    icon: none
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.apple_tv_bedroom
                        command: down
                    style:
                      top: 62%
                      left: 50%
                      transform: translate(-50%, -50%) scale(600%, 800%)
                      opacity: 0
                  # Left =================================
                  - type: icon
                    icon: none
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.apple_tv_bedroom
                        command: left
                    style:
                      top: 42.6%
                      left: 21%
                      transform: translate(-50%, -50%) scale(600%, 500%)
                      opacity: 0
                  # Right =================================
                  - type: icon
                    icon: none
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.apple_tv_bedroom
                        command: right
                    style:
                      top: 42.6%
                      left: 79%
                      transform: translate(-50%, -50%) scale(600%, 500%)
                      opacity: 0
                  # Select =================================
                  - type: icon
                    icon: none
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.apple_tv_bedroom
                        command: select
                    style:
                      top: 42.4%
                      left: 50%
                      transform: translate(-50%, -50%) scale(400%, 400%)
                      opacity: 0
                  # Home =================================
                  - type: icon
                    icon: none
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.apple_tv_bedroom
                        command: top_menu
                    hold_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.apple_tv_bedroom
                        command: home_hold
                    style:
                      top: 80%
                      left: 15.5%
                      transform: translate(-50%, -50%) scale(380%, 380%)
                      opacity: 0
                  # Play/Pause ============================
                  - type: icon
                    icon: none
                    tap_action:
                      action: call-service
                      service: media_player.media_play_pause
                      service_data:
                        entity_id: media_player.apple_tv_bedroom
                    style:
                      top: 91%
                      left: 15.5%
                      transform: translate(-50%, -50%) scale(380%, 380%)
                      opacity: 0
                  # Back =================================
                  - type: icon
                    icon: none
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.apple_tv_bedroom
                        command: menu
                    style:
                      top: 85.5%
                      left: 50%
                      transform: translate(-50%, -50%) scale(750%, 750%)
                      opacity: 0
                  # Volume Up =============================
                  - type: icon
                    icon: none
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.apple_tv_bedroom
                        command: volume_up
                    style:
                      top: 80%
                      left: 84.5%
                      transform: translate(-50%, -50%) scale(380%, 380%)
                      opacity: 0
                  # Volume Down ===========================
                  - type: icon
                    icon: none
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.apple_tv_bedroom
                        command: volume_down
                    style:
                      top: 91%
                      left: 84.5%
                      transform: translate(-50%, -50%) scale(380%, 380%)
                      opacity: 0
                card_mod:
                  style: |
                    .type-picture-elements {
                      min-height: 500px;
                      max-height: 100vh;
                      min-width: 268px;
                      max-width: min(calc((100vh - 70px) * 1125/2095), 400px);
                    }

              - type: entities
                title: Inputs
                entities:
                  - media_player.terpsichora_shield_androidtv

                  - media_player.terpsichora_cast
                  - media_player.terpsichora_echo_dot

              - type: entities
                title: Receiver
                entities:
                  - media_player.terpsichora

              - type: entities
                title: Outputs
                entities:
                  - media_player.terpsichora_zone2
                  - media_player.birch_mirror
                  - media_player.birch_mirror_2
                  - media_player.terpsichora_stage

      # [Row] Astralplane
      - type: vertical-stack
        cards:
          - type: "custom:button-card"
            template: header_card
            variables:
              name: WORKSPACE - ASTRALPLANE
              label: null
              arrow: "mdi:arrow-top-right"
              action: navigate
              link: "/ui-machines/terpsichora"

          - type: "custom:layout-card"
            layout_type: "custom:grid-layout"
            layout: !include snippets/layout-page-columns.yaml
            cards:
              - type: entities
                title: Media Sources
                entities:
                  # To Etherealm
                  - media_player.plex_etherealm

                  # To Etherealm via Multiplicity
                  - media_player.plex_plexamp_astralplane_lieutenant

                  # To Echo Link via Bluetooth
                  - media_player.plex_plex_for_mac_elysian_fields_local

              - type: entities
                title: Inputs
                entities:
                  # To Echo Link via Coaxial
                  - media_player.etherealm

                  # To Echo Link via Alexa
                  - media_player.astralplane_echo_dot

              - type: entities
                title: Receiver
                entities:
                  - media_player.astralplane_echo_link

              - type: entities
                title: Outputs
                entities:
                  - name: Speakers

      # [Row] Dorothy
      - type: vertical-stack
        cards:
          - type: "custom:button-card"
            template: header_card
            variables:
              name: BEDROOM - DOROTHY
              label: null
              arrow: "mdi:arrow-top-right"
              action: navigate
              link: "/ui-machines/terpsichora"

          - type: "custom:layout-card"
            layout_type: "custom:grid-layout"
            layout: !include snippets/layout-page-columns.yaml
            cards:
              - type: entities
                title: Media Sources
                entities:
                  - media_player.dorothy_cast_video_cast
                  - media_player.plex_dorothy
                  - media_player.plex_dorothy_cast_video

              - type: entities
                title: Inputs
                entities:
                  - media_player.dorothy_cast_video
                  - media_player.dorothy_cast
                  - media_player.bedroom_echo_show

              - type: entities
                title: Receiver
                entities:
                  - media_player.dorothy_echo_link

              - type: entities
                title: Outputs
                entities:
                  - name: Speakers

      # [Row] Misc
      - type: vertical-stack
        cards:
          - type: "custom:button-card"
            template: header_card_no_link
            variables:
              name: MISC

          - type: "custom:layout-card"
            layout_type: "custom:grid-layout"
            layout: !include snippets/layout-page-columns.yaml
            cards:
              - type: entities
                title: Other Rooms
                entities:
                  - media_player.entire_apartment
                  - media_player.bathroom_echo_dot
                  - media_player.kitchen_echo_show

              - type: entities
                title: Mobile Devices
                entities:
                  - media_player.plex_crepe

                  - media_player.plex_plexamp_kaleidoscape
                  - media_player.plex_plexamp_zuneth
                  - media_player.plex_zuneth
                  - media_player.plex_kaleidoscape
