---
type: "custom:layout-card"
layout_type: "custom:grid-layout"
layout:
  grid-template-columns: >-
    repeat(auto-fill, [col-start] minmax(150px, 1fr)
    [col-end])
  grid-auto-flow: row dense
  margin: -1
cards:
  - type: "custom:button-card"
    template: header_card
    variables:
      name: |
        <ha-icon style='--mdc-icon-size: var(--h4-font-size)' icon='mdi:football-australia'></ha-icon> UPCOMING SPORT
      label: More
      link: /ui-dashboard/sport
    view_layout:
      grid-column: 1/-1
  - type: custom:layout-card
    layout_type: custom:grid-layout
    layout:
      grid-template-columns: 1fr 1fr
      grid-template-rows: 1fr
      margin: 0
    view_layout:
      grid-column: 1/-1
      grid-row: 2/3
    cards:
      - type: "custom:button-card"
        template: live_tile
        entity: sensor.stats_sport_upcoming_today
        name: Today
        show_units: false
        variables:
          aspect_ratio: 2/1
        view_layout:
          grid-column: 1/2
        styles:
          card:
            - background: var(--ha-card-background)
      - type: "custom:button-card"
        template: live_tile
        entity: sensor.stats_sport_upcoming_thisweek
        name: This Week
        show_units: false
        variables:
          aspect_ratio: 2/1
        view_layout:
          grid-column: 2/2
        styles:
          card:
            - background: var(--ha-card-background)
      - type: "custom:auto-entities"
        sort:
          method: attribute
          attribute: sortorder
        card_param: cards
        filter:
          template: >-
            {% for s in states|selectattr('entity_id','search','sensor.sport_') | selectattr("attributes.sortorder", "!=", 999) | sort(attribute="attributes.sortorder")  -%}
              {{
                {
                  "type": "custom:mushroom-template-card",
                  "primary": "{{ state_attr(entity, \"friendly_name\") }}",
                  "multiline_secondary": true,
                  "secondary": "{{ state_attr(entity, \"nextevent\") }} ({{ state_attr(entity, \"nexttime\") }})\n{{ state_attr(entity, \"nexteventafter\") }}",
                  "entity": s.entity_id,
                  "badge_icon": "{%- if is_state_attr(entity, 'nexttime', 'On Now!') %} mdi:clock {%- endif %}",
                  "icon": "{{ state_attr(entity, \"icon\") }}",
                  "badge_color": "green",
                  "tap_action": "none",
                  "card_mod": {
                    "style": {
                      "mushroom-state-info$": ".primary {\n  font-size: 16px !important;\n  white-space: normal !important;\n}\n.secondary {\n  font-size: 15px !important;\n}\n",
                      ".": "ha-card:before {\n  content: \"\";\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  right: 5px;\n  background: url( {{ state_attr(config.entity, \"entity_picture\") }} ) center no-repeat, linear-gradient(to left, transparent, rgb(var(--rgb-card-background-color)) 50%);\n  background-repeat: no-repeat;\n  background-size: auto 100%, cover;\n  background-position: right;\n  background-blend-mode: saturation;\n  filter: opacity(0.25);\n}\nha-card {\n  background: none;\n}\n"
                    }
                  }
                }
              }},
            {%- endfor %}
        show_empty: false
        card:
          type: "custom:swipe-card"
          parameters:
            direction: vertical
            autoHeight: true
            height: 112
            effect: cube
            autoplay:
              delay: 2000
            cubeEffect:
              - slideShadows: false
        view_layout:
          grid-column: 1/-1
          grid-row: 3/4

      # - type: "custom:button-card"
      #   template: live_tile_card
      #   styles:
      #     card:
      #       - background: none
      #   view_layout:
      #     grid-column: 1/-1
      #     grid-row: 3/4
