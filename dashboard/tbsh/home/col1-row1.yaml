---
type: grid
columns: 1
square: false
cards:
  - type: custom:button-card
    template: header_card
    variables:
      name: >
        <ha-icon style='--mdc-icon-size: var(--h4-font-size)'
        icon='mdi:weather-cloudy-alert'></ha-icon> WEATHER
      label: More
      link: /mobile-dashboard/weather
    view_layout:
      grid-column: 1/-1
    card_mod:
      style: |
        ha-card {
          box-shadow: none;
        }
  - !include ../snippets/weather_forecast.yaml
  - type: custom:clock-weather-card
    entity: weather.east_tamworth
    hide_today_section: true
    forecast_days: 7
    weather_icon_type: line
    animated_icon: false

  - type: vertical-stack
    cards:
      # - type: custom:button-card
      #   template: header_card
      #   variables:
      #     name: >
      #       <ha-icon style='--mdc-icon-size: var(--h4-font-size)'
      #       icon='mdi:account-alert'></ha-icon> ME
      #     label: More
      #     link: /mobile-dashboard/weather
      #   view_layout:
      #     grid-column: 1/-1
      #   card_mod:
      #     style: |
      #       ha-card {
      #         box-shadow: none;
      #       }
      - square: false
        columns: 2
        type: grid
        cards:
          - type: custom:mushroom-template-card
            icon: mdi:cake-variant
            primary: |
              {{ states("sensor.anniversary_datetracking_mybirthday") }} days
            icon_color: grey
            secondary: |
              Cake Day, {{ states("sensor.anniversary_days_on_earth") }} Days
            badge_icon: >-
              {%- set event = int(states('sensor.anniversary_datetracking_mybirthday'))
              %}

              {% if (event) <= 10 %}

              mdi:exclamation-thick

              {% endif %}
            badge_color: red
            fill_container: true
            multiline_secondary: true
            tap_action:
              action: none
            hold_action:
              action: none
            double_tap_action:
              action: none
            card_mod:
              style:
                mushroom-shape-icon$: |
                  .shape {
                    background: radial-gradient(var(--card-background-color) 60%, transparent 0%), conic-gradient(rgb(var(--rgb-red)) {{ (365-int(states('sensor.anniversary_datetracking_mybirthday')))/365*100 }}% 0%, var(--card-background-color) 0% 100%);
                  }
                  .shape:after {
                    content: "";
                    height: 100%;
                    width: 100%;
                    position: absolute;
                    border-radius: 50%;
                    background: rgba(var(--rgb-{{ config.icon_color }}), 0.2);
                  }
          - type: custom:mushroom-template-card
            icon: mdi:cake-variant
            primary: |
              {{ states("sensor.anniversary_datetracking_myworkbirthday") }} days
            icon_color: grey
            secondary: |
              Work Cake Day, {{ states("sensor.anniversary_days_at_work") }} Days
            badge_icon: >-
              {%- set event =
              int(states('sensor.anniversary_datetracking_myworkbirthday')) %}

              {% if (event) <= 10 %}

              mdi:exclamation-thick

              {% endif %}
            badge_color: red
            layout: horizontal
            fill_container: true
            multiline_secondary: true
            tap_action:
              action: none
            hold_action:
              action: none
            double_tap_action:
              action: none
            card_mod:
              style:
                mushroom-shape-icon$: |
                  .shape {
                    background: radial-gradient(var(--card-background-color) 60%, transparent 0%), conic-gradient(rgb(var(--rgb-red)) {{ (365-int(states('sensor.anniversary_datetracking_myworkbirthday')))/365*100 }}% 0%, var(--card-background-color) 0% 100%);
                  }
                  .shape:after {
                    content: "";
                    height: 100%;
                    width: 100%;
                    position: absolute;
                    border-radius: 50%;
                    background: rgba(var(--rgb-{{ config.icon_color }}), 0.2);
                  }

  - type: vertical-stack
    cards:
      # - type: custom:button-card
      #   template: header_card
      #   variables:
      #     name: >
      #       <ha-icon style='--mdc-icon-size: var(--h4-font-size)'
      #       icon='mdi:network-outline'></ha-icon> NETWORK
      #     label: More
      #     link: /mobile-dashboard/network
      #   view_layout:
      #     grid-column: 1/-1
      #   card_mod:
      #     style: |
      #       ha-card {
      #         box-shadow: none;
      #       }

      - square: false
        columns: 1
        type: grid
        cards:
          - type: custom:decluttering-card
            template: mushroom_entity_graph
            variables:
              - entity: sensor.unifi_gateway_wan_uptimeavail_stats
              - colour: "#8694E7"
              - title: Internet Uptime
              - icon: mdi:timelapse
              - line_width: 3

          - type: custom:decluttering-card
            template: mushroom_entity_graph
            variables:
              - entity: sensor.unifi_networkstats_connected_devices
              - colour: "#8694E7"
              - title: Network Connected Devices
              - icon: mdi:download-network
              - line_width: 3

          - type: custom:decluttering-card
            template: mushroom_entity_graph
            variables:
              - entity: sensor.speedtest_download
              - colour: "#8694E7"
              - title: Download
              - icon: mdi:download-network
              - line_width: 3

          - type: custom:decluttering-card
            template: mushroom_entity_graph
            variables:
              - entity: sensor.speedtest_upload
              - colour: "#8694E7"
              - title: Upload
              - icon: mdi:upload-network
              - line_width: 3

          - type: custom:decluttering-card
            template: mushroom_entity_graph
            variables:
              - entity: sensor.speedtest_ping
              - colour: "#8694E7"
              - title: Ping
              - icon: mdi:web
              - line_width: 3

      - !include ../tamworth/nbn_fttnupgrade.yaml
