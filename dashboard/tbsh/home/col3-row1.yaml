---
type: grid
columns: 1
square: false
cards:
  - type: custom:auto-entities
    sort:
      method: attribute
      attribute: sortorder
    card_param: cards
    filter:
      template: >-
        {%- for s in states|selectattr('entity_id','search','sensor.rssfeed') -%}
        {%- for e in state_attr(s.entity_id, 'entries')[0:2] -%}
          {{
          {
            "type": "custom:mushroom-template-card",
            "entity": s.entity_id,
            "secondary": "Latest News from {{state_attr(entity , 'friendly_name')}}",
            "primary": e.title,
            "icon": "{{state_attr(entity , 'icon')}}",
            "tap_action": {
                "action": "url",
                "url_path": e.link
            },
            "fill_container": true,
            "multiline_secondary": true,
            "prmary": "",
            "icon_color": "",
            "card_mod": {
                "style": "ha-card { background: none; box-shadow: none;}"
            }
          }
          }},
        {%- endfor %} {%- endfor %}
    show_empty: false
    card:
      type: custom:swipe-card
      parameters:
        direction: vertical
        autoHeight: true
        height: 50
        effect: cube
        autoplay:
          delay: 2000
        cubeEffect:
          - slideShadows: false

  - type: horizontal-stack
    cards:
      - type: custom:mushroom-light-card
        entity: light.office_lamp
        show_brightness_control: true
        tap_action:
          action: toggle
        use_light_color: true
        fill_container: true
        show_color_temp_control: false
        show_color_control: false
        collapsible_controls: false
        hold_action:
          action: more-info
        card_mod:
          style:
            mushroom-shape-icon$: |
              .shape:active {
                transform: scale(1.2);
              }
            .: |
              ha-card {
                box-shadow: 0px 0px 10px 10px rgba({{ state_attr('light.office_lamp','rgb_color') | join(', ')}}, 1)
              }
              mushroom-light-brightness-control {
                position: absolute;
                top: 0px;
                left: 0px;
                width: 100%;
                opacity: 0.3;
                --control-height: 66px;
                --control-border-radius: var(--ha-card-border-radius, 12px);
                --rgb-disabled: var(--rgb-card-background-color);
              }
              mushroom-state-item {
                z-index: 1;
                max-width: fit-content;
                margin-bottom: 0px;
                pointer-events: none;
              }
              mushroom-shape-icon {
                pointer-events: auto;
              }
      - type: custom:mushroom-light-card
        entity: light.bedroom_lamp
        show_brightness_control: true
        tap_action:
          action: toggle
        use_light_color: true
        card_mod:
          style:
            mushroom-shape-icon$: |
              .shape:active {
                transform: scale(1.2);
              }
            .: |
              ha-card {
                box-shadow: 0px 0px 10px 10px rgba({{ state_attr('light.bedroom_lamp','rgb_color') | join(', ')}}, 1)
              }
              mushroom-light-brightness-control {
                position: absolute;
                top: 0px;
                left: 0px;
                width: 100%;
                opacity: 0.3;
                --control-height: 66px;
                --control-border-radius: var(--ha-card-border-radius, 12px);
                --rgb-disabled: var(--rgb-card-background-color);
              }
              mushroom-state-item {
                z-index: 1;
                max-width: fit-content;
                margin-bottom: 0px;
                pointer-events: none;
              }
              mushroom-shape-icon {
                pointer-events: auto;
              }

  - type: custom:decluttering-card
    template: mushroom_entity_graph
    variables:
      - entity: sensor.lastfm_user_playcount
      - colour: lime
      - title: Last.FM Listen Count
      - line_width: 3
      - hours_to_show: 168
      - points_per_hour: 4
      - icon: fab:lastfm
