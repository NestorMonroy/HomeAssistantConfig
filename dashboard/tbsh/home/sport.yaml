---
type: custom:stack-in-card
cards:
  - type: entities
    entities:
      - type: custom:paper-buttons-row
        buttons:
          - icon: mdi:football-australian
            layout: icon|name
            name: Upcoming Sport
            style:
              name:
                filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.5))
                margin-left: 18px
                font-size: 15px
                font-weight: 600
                color: var(--title)
              icon:
                filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.5))
                "--mdc-icon-size": 20px
                color: var(--title)
          - icon: mdi:arrow-top-right
            layout: icon
            tap_action:
              action: navigate
              navigation_path: sport
            style:
              icon:
                filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.5))
                '--mdc-icon-size': 20px
                color: var(--title)
        style: |
          div.flex-box {
            margin-top: -6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
          }
      - type: custom:hui-element
        card_type: grid
        columns: 2
        square: false
        style: |
          ha-card {
            background-color: var(--card-background-color);
            padding: 2px;
            box-shadow: none;
          }
        cards:
          - type: custom:mushroom-entity-card
            style: |
              ha-card {
                background-color: var(--background-color); }
            entity: sensor.upcoming_sport_next_24_hours
            hold_action:
              action: none
            double_tap_action:
              action: none
            secondary_info: name
            primary_info: state
            name: Today
            icon_color: green
          - type: custom:mushroom-entity-card
            style: |
              ha-card {
                background-color: var(--background-color); }
            entity: sensor.upcoming_sport_this_week
            name: This Week
            fill_container: false
            icon_color: yellow
            tap_action:
              action: none
            hold_action:
              action: none
            double_tap_action:
              action: none
            primary_info: state
            secondary_info: name
      - type: custom:auto-entities
        sort:
          method: attribute
          attribute: sortorder
        card_param: cards
        filter:
          template: >-
            {% for s in expand(states.group.upcomingsport_thisweek)|map(attribute='entity_id')|list|sort -%}
              {{
                {
                  "type": "custom:mushroom-template-card",
                  "primary": "{{ state_attr(entity, 'friendly_name') | replace('[Upcoming Sport] ', '') }}",
                  "multiline_secondary": true,
                  "secondary": "{{ iif(state_attr(entity, 'nextevent_time') == 'No Event Scheduled', 'No Event Scheduled', state_attr(entity, 'nextevent_desc') + ' ' + state_attr(entity, 'nextevent_time')) }}\n{{ iif(state_attr(entity, 'afterevent_time') == 'No Event Scheduled', 'No Event Scheduled', state_attr(entity, 'afterevent_desc') + ' ' + state_attr(entity, 'afterevent_time')) }}",
                  "entity": s,
                  "badge_icon": "{%- if is_state_attr(entity, 'nextevent_timeto', 0) %} mdi:clock {%- endif %}",
                  "icon": "{{ state_attr(entity, 'icon') }}",
                  "badge_color": "green",
                  "tap_action": "none",
                  "card_mod": {
                    "style": {
                      ".": "ha-card:before {\n  content: '';\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  right: 5px;\n  background: url( {{ state_attr(config.entity, 'entity_picture') }} ) center no-repeat, linear-gradient(to left, transparent, var(--background-color) 50%);\n  background-repeat: no-repeat;\n  background-size: auto 100%, cover;\n  background-position: right;\n  background-blend-mode: saturation;\n  filter: opacity(0.25);\n}\nha-card {\n  background-color: var(--background-color);\n}\n"
                    }
                  }
                }
              }},
            {%- endfor %}
        show_empty: false
        card:
          type: custom:swipe-card
          parameters:
            direction: vertical
            autoHeight: true
            height: 80
            effect: cube
            autoplay:
              delay: 2000
            cubeEffect:
              - slideShadows: false

