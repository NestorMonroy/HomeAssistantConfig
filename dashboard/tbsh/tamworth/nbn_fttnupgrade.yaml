---
type: custom:stack-in-card
cards:
  - type: entities
    entities:
      - type: custom:paper-buttons-row
        buttons:
          - icon: mdi:network-pos
            layout: icon|name
            name: NBN FTTN Upgrade Status
            style:
              name:
                filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.5))
                margin-left: 18px
                font-size: 15px
                font-weight: 600
                color: var(--title)
              icon:
                filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.5))
                "--mdc-icon-size": 20px
                color: var(--title)
        style: |
          div.flex-box {
            margin-top: -6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
          }
      - type: custom:hui-element
        card_type: grid
        columns: 1
        square: false
        style: |
          ha-card {
            background-color: var(--card-background-color);
            padding: 2px;
            box-shadow: none;
          }
        cards:
          - square: false
            columns: 2
            type: grid
            cards:
              - type: custom:mushroom-template-card
                primary: Home
                secondary: |-
                  {% set alt_reason_code = states(entity) %}
                  {% if alt_reason_code == 'NULL_NA' %}
                  Nup :(
                  {% elif alt_reason_code == 'FTTP_NA' %}
                  Soon
                  {% elif alt_reason_code == 'FTTP_SA' %}
                  Yes!
                  {% else %}
                  {% if alt_reason_code %}
                    {{ alt_reason_code }} was returned
                  {% else %}
                    Error
                  {% endif %}
                  {% endif %}
                icon: mdi:check-network
                tap_action:
                  action: none
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                entity: sensor.nbn_location_home
                icon_color: |-
                  {% set alt_reason_code = states(entity) %}
                  {% if alt_reason_code == 'NULL_NA' %}
                    red
                  {% elif alt_reason_code == 'FTTP_NA' %}
                    yellow
                  {% elif alt_reason_code == 'FTTP_SA' %}
                    green
                  {% else %}
                    grey
                  {% endif %}
                card_mod:
                  style:
                    .: |
                      ha-card {
                        background-color: var(--background-color);
                      }
              - type: custom:mushroom-template-card
                primary: Work
                secondary: |-
                  {% set alt_reason_code = states(entity) %}
                  {% if alt_reason_code == 'NULL_NA' %}
                  Nup :(
                  {% elif alt_reason_code == 'FTTP_NA' %}
                  Soon
                  {% elif alt_reason_code == 'FTTP_SA' %}
                  Yes!
                  {% else %}
                  {% if alt_reason_code %}
                    {{ alt_reason_code }} was returned
                  {% else %}
                    Error
                  {% endif %}
                  {% endif %}
                icon: mdi:check-network
                tap_action:
                  action: none
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                entity: sensor.nbn_location_dadwork
                icon_color: |-
                  {% set alt_reason_code = states(entity) %}
                  {% if alt_reason_code == 'NULL_NA' %}
                    red
                  {% elif alt_reason_code == 'FTTP_NA' %}
                    yellow
                  {% elif alt_reason_code == 'FTTP_SA' %}
                    green
                  {% else %}
                    grey
                  {% endif %}
                card_mod:
                  style:
                    .: |
                      ha-card {
                        background-color: var(--background-color);
                      }
