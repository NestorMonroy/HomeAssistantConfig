---
type: custom:auto-entities
unique: true
show_empty: true
card:
  type: custom:layout-card
  layout_type: grid
  layout:
    grid-template-columns: auto auto auto auto
    grid-template-rows: auto
    mediaquery:
      '(max-width: 500px)':
        grid-template-columns: auto
      '(max-width: 1370px)':
        grid-template-columns: auto auto
filter:
  template: >
    {% for s in expand(states.group.upcomingsport_withoutevents)|map(attribute='entity_id')|list|sort -%}
      {{
        {
          "type": "custom:fold-entity-row",
          "head": {
            "type": "custom:mushroom-template-card",
            "primary": "{{ state_attr(entity, 'friendly_name') | replace('[Upcoming Sport] ', '') }}",
            "multiline_secondary": true,
            "secondary": "{{ iif(state_attr(entity, 'nextevent_time') == 'No Event Scheduled', 'No Event Scheduled', state_attr(entity, 'nextevent_desc') + ' ' + state_attr(entity, 'nextevent_time')) }}\n{{ iif(state_attr(entity, 'afterevent_time') == 'No Event Scheduled', 'No Event Scheduled', state_attr(entity, 'afterevent_desc') + ' ' + state_attr(entity, 'afterevent_time')) }}",
            "entity": s,
            "badge_icon": "{%- if is_state_attr(entity, 'nextevent_timeto', 0) %} mdi:clock {%- endif %}",
            "icon": "{{ state_attr(entity, 'icon') }}",
            "badge_color": "green",
            "tap_action": "none",
            "card_mod": {
              "style": {
                ".": "ha-card:before {\n  content: '';\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  right: 5px;\n  background: url( {{ state_attr(config.entity, 'entity_picture') }} ) center no-repeat, linear-gradient(to left, transparent, var(--background-color) 50%);\n  background-repeat: no-repeat;\n  background-size: auto 100%, cover;\n  background-position: right;\n  background-blend-mode: saturation;\n  filter: opacity(0.25);\n}\nha-card {\n  background-color: var(--background-color);\n}\n"
              }
          }
          },
          "padding": 0,
          "entities": [
            {
              "type": "custom:atomic-calendar-revive",
              "maxDaysToShow": 365,
              "enableModeChange": true,
              "showWeekDay": true,
              "firstDayOfWeek": 1,
              "refreshInterval": 600,
              "showMonth": true,
              "showCurrentEventLine": false,
              "showDate": false,
              "sortByStartTime": true,
              "showDeclined": true,
              "showRelativeTime": true,
              "showMultiDay": true,
              "showMultiDayEventParts": false,
              "hideDuplicates": true,
              "showLastCalendarWeek": false,
              "calShowDescription": true,
              "disableCalLink": false,
              "disableCalLocationLink": false,
              "disableCalEventLink": false,
              "dimFinishedEvents": true,
              "showProgressBar": false,
              "showDescription": false,
              "entities": [
                {
                  "entity": "calendar.ical_" + s | replace("sensor.upcoming_sport_","")
                }
              ],
              "card_mod": {
                "style": "ha-card {\n  background: none;\n  box-shadow: none;\n  font-size: 12px;}\n"
              }
            }
          ]
        }
      }},
    {%- endfor %}
options: null
sort:
  method: friendly_name
card_mod:
  style:
    fold-entity-row$: |
      ha-icon {
        background: none !important;
        margin-right: 24px !important;
        --toggle-icon-width: 21px !important;
        color: rgb(var(--rgb-disabled-color));
      }
      ha-icon:active {
        animation: rotate 200ms linear forwards;
      }
      @keyframes rotate {
        100% { transform: rotate(180deg); }
      }
    .: |
      ha-card {
        background: none;
        box-shadow: none;
      }
      .card-content {
        padding: 0;
      }
      * {
        margin: 0 !important;
      }
