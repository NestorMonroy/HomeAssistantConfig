---
title: Upcoming Sport
path: sport
theme: "noctis"
icon: mdi:football-australian

type: "custom:grid-layout"
layout: !include snippets/layout-page-margin.yaml

cards:
  - type: "custom:layout-card"
    layout_type: "custom:grid-layout"
    view_layout:
      grid-area: cc
    layout:
      grid-template-columns: auto
      grid-template-rows: auto
      grid-column-gap: 16px
      margin: -1px
      mediaquery:
        "(max-width: 800px)":
          grid-template-columns: auto
    cards:
      - type: "custom:layout-card"
        layout_type: "custom:grid-layout"
        layout: !include snippets/layout-page-title.yaml
        view_layout:
          grid-column: 1/-1
        cards:
          - type: markdown
            style: !include snippets/style-markdown-page-title.yaml
            content: >
              # Upcoming Sport

              Today: {{ states|selectattr('entity_id','search','sensor.sport_')|selectattr("attributes.sortorder", "<=", 0)|list|count }}, This Week: {{ states|selectattr('entity_id','search','sensor.sport_')|selectattr("attributes.sortorder", "<=", 7)|list|count }}<br/>

          - type: "custom:layout-card"
            layout_type: "custom:grid-layout"
            layout:
              margin: 0
              padding: 0
              card_margin: 1px
            view_layout:
              place-self: end right
            cards:
              - entity: sensor.time
                template: clock
                type: custom:button-card
                variables:
                  entity_date: sensor.date
                  entity_temperature: sensor.tempest_st_00056115_temperature
                  entity_weather: weather.east_tamworth_hourly
      - type: custom:tabbed-card
        tabs:
          - attributes:
              label: Calendar
              icon: mdi:calendar
            card:
              type: custom:auto-entities
              unique: true
              show_empty: false
              card:
                type: custom:layout-card
                layout_type: "custom:grid-layout"
                layout: !include snippets/layout-page-columns.yaml
              filter:
                template: |
                  {% for s in states|selectattr('entity_id','search','sensor.sport_') | sort(attribute="attributes.friendly_name")  -%}
                    {{
                      {
                        "template": "sport_cal",
                        "type": "custom:button-card",
                        "variables": {
                          "entity_part": "sensor.ical_" + s.entity_id | replace("sensor.sport_","") + "_event_",
                          "icon": s.attributes.entity_picture,
                          "limit": 5,
                          "replace": "dummytext"
                        }
                      }
                    }},
                  {%- endfor %}
              options: null
              # sort:
              #   method: attribute
              #   attribute: date
          - attributes:
              label: Competition Calendars
              icon: mdi:calendar
            card:
              type: "custom:layout-card"
              layout_type: "custom:grid-layout"
              layout:
                grid-template-columns: "repeat(auto-fill, [col-start] minmax(500px, 1fr) [col-end])"
                grid-template-rows: auto
                grid-column-gap: 16px
                margin: -1px

              cards:
                - type: custom:atomic-calendar-revive
                  name: AFL
                  maxDaysToShow: 365
                  enableModeChange: true
                  showWeekDay: true
                  firstDayOfWeek: 1
                  refreshInterval: 600
                  showMonth: true
                  showCurrentEventLine: false
                  showDate: false
                  sortByStartTime: true
                  showDeclined: true
                  showRelativeTime: true
                  showMultiDay: false
                  showMultiDayEventParts: true
                  hideDuplicates: true
                  showLastCalendarWeek: false
                  calShowDescription: true
                  disableCalLink: false
                  disableCalLocationLink: false
                  disableCalEventLink: false
                  dimFinishedEvents: true
                  showProgressBar: false
                  showDescription: false
                  entities:
                    - entity: calendar.ical_afl_all_teams
                - type: custom:atomic-calendar-revive
                  name: NRL
                  maxDaysToShow: 365
                  enableModeChange: true
                  showWeekDay: true
                  firstDayOfWeek: 1
                  refreshInterval: 600
                  showMonth: true
                  showCurrentEventLine: false
                  showDate: false
                  sortByStartTime: true
                  showDeclined: true
                  showRelativeTime: true
                  showMultiDay: false
                  showMultiDayEventParts: true
                  hideDuplicates: true
                  showLastCalendarWeek: false
                  calShowDescription: true
                  disableCalLink: false
                  disableCalLocationLink: false
                  disableCalEventLink: false
                  dimFinishedEvents: true
                  showProgressBar: false
                  showDescription: false
                  entities:
                    - entity: calendar.ical_nrl_all_teams
                - type: custom:atomic-calendar-revive
                  name: International Cricket
                  maxDaysToShow: 365
                  enableModeChange: true
                  showWeekDay: true
                  firstDayOfWeek: 1
                  refreshInterval: 600
                  showMonth: true
                  showCurrentEventLine: false
                  showDate: false
                  sortByStartTime: true
                  showDeclined: true
                  showRelativeTime: true
                  showMultiDay: false
                  showMultiDayEventParts: true
                  hideDuplicates: true
                  showLastCalendarWeek: false
                  calShowDescription: true
                  disableCalLink: false
                  disableCalLocationLink: false
                  disableCalEventLink: false
                  dimFinishedEvents: true
                  showProgressBar: false
                  showDescription: false
                  entities:
                    - entity: calendar.ical_international_cricket_mens
                - type: custom:atomic-calendar-revive
                  name: International Rugby
                  maxDaysToShow: 365
                  enableModeChange: true
                  showWeekDay: true
                  firstDayOfWeek: 1
                  refreshInterval: 600
                  showMonth: true
                  showCurrentEventLine: false
                  showDate: false
                  sortByStartTime: true
                  showDeclined: true
                  showRelativeTime: true
                  showMultiDay: false
                  showMultiDayEventParts: true
                  hideDuplicates: true
                  showLastCalendarWeek: false
                  calShowDescription: true
                  disableCalLink: false
                  disableCalLocationLink: false
                  disableCalEventLink: false
                  dimFinishedEvents: true
                  showProgressBar: false
                  showDescription: false
                  entities:
                    - entity: calendar.ical_international_rugby_all_teams
          - attributes:
              label: TeamTracker
              icon: mdi:soccer-field
            card:
              type: custom:auto-entities
              unique: true
              show_empty: false
              card:
                type: custom:layout-card
                layout_type: "custom:grid-layout"
                layout: !include snippets/layout-page-columns.yaml
              filter:
                template: |
                  {%- for team in integration_entities("teamtracker") -%}
                  {%- if states(team) != "NOT_FOUND" -%}
                      {{{"type": "custom:teamtracker-card",
                        "entity": team }}},
                  {%- endif -%}
                  {%- endfor -%}
                exclude:
                  - entity_id: "*team_tracker*"
              options: null
              sort:
                method: attribute
                attribute: date
          - attributes:
              label: Formula 1
              icon: phu:f1
            card: !include sport/formula1.yaml
