---
type: vertical-stack
cards:
  - type: custom:decluttering-card
    template: mushroom_entity_graph
    variables:
      - entity: sensor.integrations
      - colour: "#8694E7"
      - title: HA Integrations In Use
      - hours_to_show: 168
      - points_per_hour: 1
      - icon: mdi:package-variant-closed
  - type: custom:decluttering-card
    template: mushroom_entity_graph
    variables:
      - entity: sensor.custom_integrations
      - colour: "#8694E7"
      - title: Custom Integrations In Use
      - hours_to_show: 168
      - points_per_hour: 1
      - icon: mdi:package-variant-closed
  - type: entities
    card_mod:
      style:
        fold-entity-row$: |
          ha-icon {
            color: rgb(var(--rgb-disabled-color));
            margin-right: 24px;
          }
        hui-section-row $: |
          .divider { display: none; }
        .: |
          .card-content {
            padding: 0;
          }
    entities:
      - type: custom:fold-entity-row
        head:
          type: custom:mushroom-template-card
          primary: Integrations by Load Time
          icon: mdi:package-variant-closed
          icon_color: orange
          card_mod:
            style: |
              ha-card {
                background: none;
                border: 0;
                box-shadow: none;
              }
              ha-markdown {
                max-height: 200px;
                overflow-y: auto;
              }
        padding: 0
        entities:
          - type: custom:hui-element
            card_type: markdown
            content: |
              |Rank|Integration|Time|
              |:---:|:---:|:---:|
              {%- set ns = namespace(count = 0) %}
              {%- for attr in states.sensor.start_time.attributes %}
              {%- if not attr=="friendly_name"
                  and not attr=="unit_of_measurement"
                  and not attr=="icon" -%}
              {%- set ns.count = ns.count+1 %}
              |{{ ns.count }}|{{attr}}|{{states.sensor.start_time.attributes [attr] }}s|
              {%- endif %}
              {%- endfor %}
            card_mod:
              style: |
                ha-card {
                  background: none;
                  border: 0;
                  box-shadow: none;
                }
  - type: custom:decluttering-card
    template: mushroom_entity_graph
    variables:
      - entity: sensor.entities
      - colour: "#8694E7"
      - title: Entities in Use
      - hours_to_show: 168
      - points_per_hour: 1
      - icon: mdi:counter
  - type: custom:decluttering-card
    template: mushroom_entity_graph
    variables:
      - entity: sensor.sensors
      - colour: "#8694E7"
      - title: Sensors in Use
      - hours_to_show: 168
      - points_per_hour: 1
      - icon: mdi:counter
  - type: custom:decluttering-card
    template: mushroom_entity_graph
    variables:
      - entity: sensor.automations
      - colour: "#8694E7"
      - title: Automations in Use
      - hours_to_show: 168
      - points_per_hour: 1
      - icon: mdi:robot
  - type: custom:decluttering-card
    template: mushroom_entity_graph
    variables:
      - entity: sensor.devices
      - colour: "#8694E7"
      - title: Devices
      - hours_to_show: 168
      - points_per_hour: 1
      - icon: mdi:cellphone
