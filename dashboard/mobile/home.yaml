---
theme: noctis
title: Home
path: home
badges: []
cards:
  - !include snippets/header.yaml
  - type: custom:mushroom-template-card
    primary: >
      Home
    icon: mdi:home
    fill_container: true
    tap_action:
      action: none
    hold_action:
      action: none
    icon_color: red
    secondary: |-
      {% set time = now().hour %}
      {% if time <= 5 %} {{'ðŸ’§'}}  Good night!
      {% elif time <= 10 %} {{'ðŸ’§'}} Good morning!
      {% elif time <= 17 %} {{'ðŸ’§'}} Good afternoon!
      {% else %} {{'ðŸ’§'}} Good evening!
      {% endif %}
    card_mod:
      style: |
        ha-card {
          background: none;
          box-shadow: none;
          padding: 0px 16px 8px !important;
        }
        :host {
          --mush-card-primary-font-size: 1.2rem;
        }

  - type: vertical-stack
    cards:
      - !include ../home/partial_docker.yaml
      - !include ../home/partial_me.yaml
      - type: custom:stack-in-card
        mode: horizontal
        card_mod:
          style: |
            ha-card {
              background: none;
              box-shadow: none;
            }
        cards:
          - type: custom:mushroom-template-card
            icon: mdi:television
            icon_color: orange
            layout: vertical
            tap_action:
              action: navigate
              navigation_path: tv-movies
            hold_action:
              action: none
            double_tap_action:
              action: none
            secondary: Media
            multiline_secondary: false
          - type: custom:mushroom-template-card
            icon: mdi:lan
            icon_color: orange
            layout: vertical
            tap_action:
              action: navigate
              navigation_path: network
            hold_action:
              action: none
            double_tap_action:
              action: none
            secondary: Network
            multiline_secondary: false
          - type: custom:mushroom-template-card
            icon: mdi:solar-power-variant
            icon_color: orange
            layout: vertical
            tap_action:
              action: navigate
              navigation_path: solar
            hold_action:
              action: none
            double_tap_action:
              action: none
            secondary: Solar
            multiline_secondary: false
          - type: custom:mushroom-template-card
            icon: mdi:football-australian
            icon_color: red
            layout: vertical
            tap_action:
              action: navigate
              navigation_path: sport
            hold_action:
              action: none
            double_tap_action:
              action: none
            secondary: Sport
            multiline_secondary: false
          - type: custom:mushroom-template-card
            icon: mdi:city
            icon_color: red
            layout: vertical
            tap_action:
              action: navigate
              navigation_path: tamworth
            hold_action:
              action: none
            double_tap_action:
              action: none
            secondary: Tamworth
            multiline_secondary: false
          - type: custom:mushroom-template-card
            icon: mdi:weather-cloudy-alert
            icon_color: red
            layout: vertical
            tap_action:
              action: navigate
              navigation_path: weather
            hold_action:
              action: none
            double_tap_action:
              action: none
            secondary: Weather
            multiline_secondary: false

      - type: custom:vertical-stack-in-card
        cards:
          - type: custom:mushroom-template-card
            entity: sensor.tv_wave_humidity
            primary: Humidity
            secondary: |
              {{ states('sensor.tv_wave_humidity') | round(0) }}%
            icon: mdi:water-percent
            icon_color: blue
            tap_action:
              action: more-info
          - type: custom:layout-card
            layout_type: masonry
            layout:
              width: 106
              max_cols: 1
              height: auto
              padding: 0px
              card_margin: var(--masonry-view-card-margin, -10px 8px 15px)
            cards:
              - type: custom:mini-graph-card
                entities:
                  - entity: sensor.tv_wave_humidity
                    name: Humidity
                    color: "#2196f3"
                hours_to_show: 24
                line_width: 3
                animate: true
                show:
                  name: false
                  icon: false
                  state: false
                  legend: false
                  fill: fade
                card_mod:
                  style: |
                    ha-card {
                      background: none;
                      box-shadow: none;
                      --ha-card-border-width: 0;
                    }
      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            title: Hello, {{ user }} !
            subtitle: ""
          - type: vertical-stack
            cards:
              - type: custom:mushroom-chips-card
                chips:
                  - type: entity
                    entity: person.thomas_baxter
                    use_entity_picture: true
                    name: Thomas
                    content_info: state
                    tap_action:
                      action: more-info
                  - type: conditional
                    conditions:
                      - entity: light.all_lights
                        state: "on"
                    chip:
                      type: template
                      content: "{% set total = 0 %}\n {% if is_state('light.lounge', 'on') %}\n  {% set total = total + 1 %}\n{% endif %}\n{% if is_state('light.lounge_hue', 'on') %}\n  {% set total = total + 1 %}\n{% endif %}\n{% if is_state('light.back', 'on') %}\n  {% set total = total + 1 %}\n{% endif %}\n{% if is_state('light.yeelight_mono1_f0b429a93ec5', 'on') %}\n  {% set total = total + 1 %}\n{% endif %}\n{% if is_state('light.bathroom_light', 'on') %}\n  {% set total = total + 1 %}\n{% endif %} \n{% if is_state('light.bedroom', 'on') %}\n  {% set total = total + 1 %}\n{% endif %} \n{% if is_state('light.bedroom_hue', 'on') %}\n  {% set total = total + 1 %}\n{% endif %} \n{% if is_state('light.boys_light2', 'on') %}\n  {% set total = total + 1 %}\n{% endif %}\n{% if is_state('light.alex_lamp', 'on') %}\n  {% set total = total + 1 %}\n{% endif %}\t\n{% if is_state('light.canopy', 'on') %}\n  {% set total = total + 1 %}\n{% endif %} \n{% if is_state('light.hallway_cupboard', 'on') %}\n  {% set total = total + 1 %}\n{% endif %} \n{% if is_state('light.hallway_lights', 'on') %}\n  {% set total = total + 1 %}\n{% endif %} \n{% if is_state('light.kitchen_leds', 'on') %}\n  {% set total = total + 1 %}\n{% endif %} \n{% if is_state('light.kitchen_spotlights', 'on') %}\n  {% set total = total + 1 %}\n{% endif %}\n{% if is_state('light.pc_govee_flow_pro', 'on') %}\n  {% set total = total + 1 %}\n{% endif %}\n{% if is_state('light.thomas_lamp', 'on') %}\n  {% set total = total + 1 %}\n{% endif %}\n{% if is_state('light.thomas_light', 'on') %}\n  {% set total = total + 1 %}\n{% endif %}\n{% if is_state('light.office', 'on') %}\n  {% set total = total + 1 %}\n{% endif %}    \n  {% if is_state('light.washroom', 'on') %}\n  {% set total = total + 1 %}\n{% endif %}\n  {% if is_state('light.yeelight_mono1_f0b429a93ec5t', 'on') %}\n  {% set total = total + 1 %}\n{% endif %}\n{{total}} On"
                      icon: mdi:lightbulb-outline
                      icon_color: >-
                        {% if is_state('light.lounge', "on") %}
                          yellow
                        {% elif
                        is_state("light.yeelight_mono1_f0b429a93ec5", "on")
                        %}
                          yellow
                        {% elif is_state("light.lounge_hue", "on") %}
                          yellow
                        {% elif is_state("light.back", "on") %}
                          yellow
                        {% elif is_state("light.bathroom_light", "on") %}
                          yellow
                        {% elif is_state("light.bedroom", "on") %}
                          yellow
                        {% elif is_state("light.bedroom_hue", "on") %}
                          yellow
                        {% elif is_state("light.boys_light2", "on") %}
                          yellow
                        {% elif is_state("light.alex_lamp", "on") %}
                          yellow
                        {% elif is_state("light.canopy", "on") %}
                          yellow
                        {% elif is_state("light.hallway_cupboard", "on") %}
                          yellow
                        {% elif is_state("light.hallway_lights", "on") %}
                          yellow
                        {% elif is_state("light.kitchen_leds", "on") %}
                          yellow
                        {% elif is_state("light.kitchen_spotlights", "on")
                        %}
                          yellow
                        {% elif is_state("light.pc_govee_flow_pro", "on") %}
                          yellow
                        {% elif is_state("light.thomas_lamp", "on") %}
                          yellow
                        {% elif is_state("light.washroom", "on") %}
                          yellow
                        {% elif
                        is_state("light.yeelight_mono1_f0b429a93ec5t", "on")
                        %}
                          yellow
                        {% elif is_state("light.thomas_light", "on") %}
                          yellow
                        {% elif is_state("light.office", "on") %}
                          yellow
                        {% else %}
                          grey
                        {% endif %}
                      tap_action:
                        action: navigate
                        navigation_path: /mobile-dashboard/lights
                  - type: template
                    entity: lock.nuki_front_door_lock
                    icon: |-
                      {% set state=states(entity) %}
                      {% if state=='locked' %}
                      mdi:lock
                      {% elif state=='unlocked' %}
                      mdi:lock-open-alert
                      {% else %}
                      mdi:alert
                      {% endif %}
                    icon_color: |-
                      {% set state=states(entity) %}
                      {% if state=='locked' %}
                      green
                      {% elif state=='unlocked' %}
                      red
                      {% else %}
                      grey
                      {% endif %}
                    content: Front Door
                    tap_action:
                      action: toggle
                  - type: conditional
                    conditions:
                      - entity: binary_sensor.all_windows
                        state: "on"
                    chip:
                      type: template
                      content: >-
                        {% set total = 0 %} {% if
                        is_state('binary_sensor.small_bedroom_window_contact',
                        'on') %}
                          {% set total = total + 1 %}
                        {% endif %} {% if
                        is_state('binary_sensor.big_bedroom_window_contact',
                        'on') %}
                          {% set total = total + 1 %}
                        {% endif %} {% if
                        is_state('binary_sensor.alex_big_window_contact',
                        'on') %}
                          {% set total = total + 1 %}
                        {% endif %} {% if
                        is_state('binary_sensor.alex_small_window_contact',
                        'on') %}
                          {% set total = total + 1 %}
                        {% endif %} {% if
                        is_state('binary_sensor.thomas_big_window_contact',
                        'on') %}
                          {% set total = total + 1 %}
                        {% endif %} {% if
                        is_state('binary_sensor.thomas_small_window_contact',
                        'on') %}
                          {% set total = total + 1 %}
                        {% endif %} {% if
                        is_state('binary_sensor.bathroom_window_contact',
                        'on') %}
                          {% set total = total + 1 %}
                        {% endif %} {% if
                        is_state('binary_sensor.left_kitchen_window_sensor_magnet_on_off',
                        'on') %}
                          {% set total = total + 1 %}
                        {% endif %} {% if
                        is_state('binary_sensor.right_kitchen_window_contact',
                        'on') %}
                          {% set total = total + 1 %}
                        {% endif %} {{total}} Open
                      icon: mdi:window-open
                      icon_color: >-
                        {% if
                        is_state('binary_sensor.small_bedroom_window_contact',
                        'on') %}
                          orange
                          {% elif is_state("binary_sensor.big_bedroom_window_contact",
                        "on") %}
                          orange
                          {% elif is_state("binary_sensor.alex_big_window_contact", "on")
                        %}
                          orange
                          {% elif is_state("binary_sensor.alex_small_window_contact", "on")
                        %}
                          orange
                          {% elif is_state("binary_sensor.thomas_big_window_contact", "on")
                        %}
                          orange
                          {% elif is_state("binary_sensor.thomas_small_window_contact",
                        "on") %}
                          orange
                          {% elif is_state("binary_sensor.bathroom_window_contact", "on")
                        %}
                          orange
                          {% elif
                        is_state("binary_sensor.left_kitchen_window_sensor_magnet_on_off",
                        "on") %}
                          orange
                          {% elif is_state("binary_sensor.right_kitchen_window_contact",
                        "on") %}
                          orange
                        {% else %}
                          grey
                        {% endif %}
                      tap_action:
                        action: navigate
                        navigation_path: /mobile-dashboard/windows
                  - type: template
                    content: >-
                      {% set total = 0 %}

                      {% if is_state('media_player.lounge_sonos_ray',
                      'playing') %}
                        {% set total = total + 1 %}
                      {% endif %}

                      {% if is_state('media_player.lounge_tv', 'on') %}
                        {% set total = total + 1 %}
                      {% endif %}

                      {% if is_state('media_player.bedroom_tv_samsung',
                      'on') %}
                        {% set total = total + 1 %}
                      {% endif %}

                      {% if is_state('media_player.bathroom_sonos',
                      'playing') %}
                        {% set total = total + 1 %}
                      {% endif %}

                      {% if is_state('media_player.bedroom_sonos',
                      'playing') %}
                        {% set total = total + 1 %}
                      {% endif %}

                      {% if is_state('media_player.hallway_sonos',
                      'playing') %}
                        {% set total = total + 1 %}
                      {% endif %}

                      {% if is_state('media_player.kitchen_sonos',
                      'playing') %}
                        {% set total = total + 1 %}
                      {% endif %}

                      {% if is_state('media_player.sonos_roam_sl',
                      'playing') %}
                        {% set total = total + 1 %}
                      {% endif %}

                      {{total}} Playing
                    icon: mdi:cast
                    icon_color: >-
                      {% if is_state('media_player.lounge_sonos_ray',
                      'playing') %}
                        green
                      {% elif is_state("media_player.lounge_tv", 'on') %}
                        green
                      {% elif is_state('media_player.bedroom_tv_samsung',
                      'on') %}
                        green
                      {% elif is_state('media_player.bathroom_sonos',
                      'playing') %}
                        green
                      {% elif is_state('media_player.bedroom_sonos',
                      'playing') %}
                        green
                      {% elif is_state('media_player.hallway_sonos',
                      'playing') %}
                        green
                      {% elif is_state('media_player.kitchen_sonos',
                      'playing') %}
                        green
                      {% elif is_state('media_player.sonos_roam_sl',
                      'playing') %}
                        green
                      {% else %}
                        grey
                      {% endif %}
                    tap_action:
                      action: navigate
                      navigation_path: /mobile-dashboard/media
                    double_tap_action:
                      action: navigate
                      navigation_path: /mobile-dashboard/sonos
                  - type: template
                    content: >-
                      {% set total = 0 %} {% if
                      is_state('cover.bedroom_blind', 'closed') %}
                        {% set total = total + 1 %}
                      {% endif %} {% if
                      is_state('binary_sensor.big_bedroom_window_cclosedtact',
                      'closed') %}
                        {% set total = total + 1 %}
                      {% endif %} {% if is_state('cover.bedroom_blind_2',
                      'closed') %}
                        {% set total = total + 1 %}
                      {% endif %} {% if is_state('cover.thomas_blind',
                      'closed') %}
                        {% set total = total + 1 %}
                      {% endif %} {% if is_state('cover.lounge_curtains',
                      'closed') %}
                        {% set total = total + 1 %}
                      {% endif %} {% if is_state('cover.kitchen_blind',
                      'closed') %}
                        {% set total = total + 1 %}
                      {% endif %} {{total}} Closed
                    icon: mdi:blinds
                    icon_color: |-
                      {% if is_state('cover.bedroom_blind', 'closed') %}
                        purple
                        {% elif is_state("cover.bedroom_blind_2", "closed") %}
                        purple
                        {% elif is_state("cover.thomas_blind", "closed") %}
                        purple
                        {% elif is_state("cover.lounge_curtains", "closed") %}
                        purple
                        {% elif is_state("cover.kitchen_blind", "closed") %}
                        purple
                      {% else %}
                        grey
                      {% endif %}
                    tap_action:
                      action: navigate
                      navigation_path: /mobile-dashboard/covers
                  - type: conditional
                    conditions:
                      - entity: vacuum.roborock_vacuum_a27
                        state: cleaning
                    chip:
                      type: entity
                      entity: vacuum.roborock_vacuum_a27
                      icon_color: indigo
                      tap_action:
                        action: navigate
                        navigation_path: /mobile-dashboard/vacuum
                  - type: conditional
                    conditions:
                      - entity: binary_sensor.all_motion
                        state: "on"
                    chip:
                      type: template
                      content: >-
                        {% set total = 0 %}

                        {% if
                        is_state('binary_sensor.bathroom_sensor_motion',
                        'on') %}
                          {% set total = total + 1 %}
                        {% endif %}

                        {% if is_state('binary_sensor.kitchen_motion_group',
                        'on') %}
                          {% set total = total + 1 %}
                        {% endif %}

                        {{total}} Motion
                      icon: mdi:motion-sensor
                      icon_color: >-
                        {% if
                        is_state('binary_sensor.bathroom_sensor_motion',
                        'on') %}
                          purple
                        {% elif
                        is_state("binary_sensor.kitchen_motion_group", "on")
                        %}
                          purple
                        {% else %}
                          grey
                        {% endif %}
      - type: custom:mushroom-title-card
        title: Favorites
      - type: custom:mushroom-entity-card
        entity: input_boolean.guest_mode
        tap_action:
          action: toggle
