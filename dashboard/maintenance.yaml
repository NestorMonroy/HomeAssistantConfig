---
title: Home Assistant
path: homeassistant
icon: mdi:home-assistant
theme: "Fluent Red"

type: "custom:grid-layout"
layout: !include snippets/layout-page-margin.yaml

cards:
  - type: "custom:layout-card"
    layout_type: "custom:grid-layout"
    layout:
      grid-template-columns: "repeat(auto-fill, [col-start] minmax(450px, 1fr) [col-end])"
      grid-template-rows: auto
      grid-column-gap: 32px
      margin: -1px
      mediaquery:
        "(max-width: 800px)":
          grid-template-columns: "repeat(auto-fill, [col-start] minmax(256px, 1fr) [col-end])"
          margin: 0
    view_layout:
      grid-area: cc

    cards:
      # [Header] Summary
      - type: markdown
        style: !include snippets/style-markdown-page-title.yaml
        view_layout:
          grid-column: 1/-1
        content: >
          # Home Assistant

      # [Column] Watchman
      - type: vertical-stack
        cards:
          - type: "custom:button-card"
            template: header_card_no_link
            variables:
              name: |
                <ha-icon style='--mdc-icon-size: var(--h4-font-size)' icon='mdi:shield-half-full'></ha-icon> WATCHMAN
            view_layout:
              grid-column: 1/-1

          - !include homeassistant/snippets/watchman_entities.yaml
          - !include homeassistant/snippets/watchman_services.yaml
          - !include homeassistant/snippets/unavailable.yaml

            # [Column] Batteries

      - type: vertical-stack
        cards:
          - type: "custom:button-card"
            template: header_card_no_link
            variables:
              name: BATTERIES
            view_layout:
              grid-column: 1/-1

          - card:
              style: |
                ha-card {
                  background-color: var(--dwains-theme-primary);
                  box-shadow: none;
                }
                .card-header {
                  padding: 5px 16px 10px;
                  font-size: 18px;
                  font-weight: 700 !important;
                }
              type: entities
            filter:
              include:
                - entity_id: sensor.*battery*
                  options:
                    entity_row: true
                    height: 4
                    max: 100
                    min: 0
                    positions:
                      icon: "off"
                      indicator: "off"
                      name: inside
                      value: inside
                    style: |-
                      bar-card-row {
                        height: 12px;
                        padding-top: 36px;
                      }
                      bar-card-background {
                        background: var(--primary-background-color);
                      }
                      bar-card-contentbar {
                        margin-top: -16px;
                      }
                      bar-card-name, bar-card-value {
                        margin: 0;
                      }
                    type: custom:bar-card
                  state: <=100
                  unit_of_measurement: "%"
                - attributes:
                    device_class: battery
                  domain: sensor
                  options:
                    entity_row: true
                    height: 4
                    max: 100
                    min: 0
                    positions:
                      icon: "off"
                      indicator: "off"
                      name: inside
                      value: inside
                    style: |-
                      bar-card-row {
                        height: 12px;
                        padding-top: 36px;
                      }
                      bar-card-background {
                        background: var(--primary-background-color);
                      }
                      bar-card-contentbar {
                        margin-top: -16px;
                      }
                      bar-card-name, bar-card-value {
                        margin: 0;
                      }
                    type: custom:bar-card
                  state: <=100
            sort:
              method: state
              numeric: true
              reverse: true
            type: custom:auto-entities

      # [Column] Batteries

      - type: vertical-stack
        cards:
          - type: "custom:button-card"
            template: header_card_no_link
            variables:
              name: HOME ASSISTANT SERVER
            view_layout:
              grid-column: 1/-1

          - type: vertical-stack
            cards:
              - !include homeassistant/snippets/ha_versions.yaml

              - !include homeassistant/snippets/graph_dbsize.yaml
              - !include homeassistant/snippets/graph_countyamlfiles.yaml
              - !include homeassistant/snippets/graph_countyamllines.yaml

      - type: vertical-stack
        cards:
          - type: "custom:button-card"
            template: header_card_no_link
            variables:
              name: HACS UPDATES
            view_layout:
              grid-column: 1/-1

          - !include homeassistant/snippets/hacs_updates.yaml

      # [Column] Watchman
      - type: vertical-stack
        cards:
          - type: "custom:button-card"
            template: header_card_no_link
            variables:
              name: WATCHMAN
            view_layout:
              grid-column: 1/-1

          - type: custom:atomic-calendar-revive
            maxDaysToShow: 90
            enableModeChange: true
            showWeekDay: true
            firstDayOfWeek: 1
            refreshInterval: 600
            showMonth: true
            showCurrentEventLine: false
            showDate: false
            sortByStartTime: true
            showDeclined: true
            showRelativeTime: false
            showMultiDay: false
            showMultiDayEventParts: true
            hideDuplicates: true
            showLastCalendarWeek: false
            calShowDescription: false
            disableCalLink: false
            disableCalLocationLink: false
            disableCalEventLink: false
            dimFinishedEvents: true
            showProgressBar: false
            showDescription: false
            entities:
              - entity: calendar.home_assistant_devs

      - type: vertical-stack
        cards:
          - type: "custom:button-card"
            template: header_card_no_link
            variables:
              name: HOME ASSISTANT ADDONS
            view_layout:
              grid-column: 1/-1

          - !include homeassistant/snippets/addons.yaml
